<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>AI Message Refiner</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <div class="popup">
      <!-- Header -->
      <div class="header">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none"
             stroke="currentColor" stroke-width="2" stroke-linecap="round"
             stroke-linejoin="round" width="22" height="22" class="header-icon">
          <path d="M12 2l2.09 6.26L20 10l-5.91 1.74L12 18l-2.09-6.26L4 10l5.91-1.74L12 2z"/>
        </svg>
        <h1>AI Message Refiner</h1>
      </div>

      <!-- Provider Selection -->
      <div class="section">
        <label for="provider-select">AI Provider</label>
        <select id="provider-select" class="select-input">
          <option value="groq">Groq (Free)</option>
          <option value="gemini">Google Gemini</option>
          <option value="openai">OpenAI</option>
          <option value="openrouter">OpenRouter</option>
          <option value="mistral">Mistral AI</option>
          <option value="anthropic">Anthropic (Claude)</option>
        </select>
        <p class="provider-hint">
          Get your key from <a id="provider-link" href="https://console.groq.com/keys" target="_blank">console.groq.com</a>
        </p>
      </div>

      <!-- API Key Section -->
      <div class="section">
        <label for="api-key">API Key</label>
        <div class="input-row">
          <input
            type="password"
            id="api-key"
            placeholder="gsk_..."
            spellcheck="false"
            autocomplete="off"
          />
          <button id="toggle-visibility" class="icon-btn" title="Show/Hide key">
            <svg id="eye-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"
                 fill="none" stroke="currentColor" stroke-width="2" width="18" height="18">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
              <circle cx="12" cy="12" r="3"/>
            </svg>
          </button>
        </div>
      </div>

      <!-- Model Override (optional) -->
      <div class="section">
        <label for="model-input">Model <span class="label-hint">(optional)</span></label>
        <input
          type="text"
          id="model-input"
          class="text-input"
          placeholder="Leave blank for default"
          spellcheck="false"
          autocomplete="off"
        />
        <p class="model-default" id="model-default">Default: <code>llama-3.3-70b-versatile</code></p>
      </div>

      <!-- Save -->
      <button id="save-btn" class="primary-btn">Save Settings</button>
      <p id="status-msg" class="status-msg"></p>

      <!-- Instructions -->
      <div class="section instructions">
        <h2>How to use</h2>
        <ol>
          <li>Choose a provider and paste your API key above</li>
          <li>Click <strong>Save Settings</strong></li>
          <li>Open any supported chat:
            <ul>
              <li><a href="https://web.whatsapp.com" target="_blank">WhatsApp Web</a></li>
              <li><a href="https://www.facebook.com" target="_blank">Facebook Chat</a></li>
              <li><a href="https://www.messenger.com" target="_blank">Messenger</a></li>
            </ul>
          </li>
          <li>Type a message, then click the floating <strong>&#10024; sparkle</strong> button</li>
          <li>Your message will be refined by AI instantly!</li>
        </ol>
      </div>

      <!-- Footer -->
      <div class="footer">
        <span>Only your message text is sent to the AI. Nothing else.</span>
      </div>
    </div>

    <script src="popup.js"></script>
  </body>
</html>
